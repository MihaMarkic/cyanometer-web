function showLoadingGif(){$("#cyan-display").css("background","url(/images/loading.svg) no-repeat center");$("#cyan-display").css("height","300px");$("html, body").animate({scrollTop:0},"slow")}function preloadAllImages(n){var t=$("#images");n.forEach(function(i){console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! preloading: "+i.url);loadImage(i,t,n.length)})}function loadImage(n,t,i){var r=n.thumbnailUrl,u=moment(n.takenAt).format(dateMask);$(`<img src="${r}"></img>`).on("load",function(){var f=$(`
<div class='cyan-display-main landing-image' style="background-image:url('${r}')" onclick="handleLocationClick('${n.city}','${n.country}')">
            <div class="time">
                <span>${n.city}, ${n.country}</span>
                <br/>
                <span>${u}</span>
            </div>
            <div class="calendar"></div>
</div>`);f.appendTo(t);loadedImages++;loadedImages===i&&imagesLoaded()})}function handleLocationClick(n,t){window.location.href=`/location/${t.toLowerCase()}/${n.toLowerCase()}`}function imagesLoaded(){$(".cyan-display-main").css("opacity","0");$(".cyan-display-main").css("visibility","visible");$("#cyan-info").css("visibility","visible");$(".debug.meta li").css("visibility","visible");$("#cyan-display").css("background","white");$("#cyan-display").css("height","auto");var n=new TimelineLite;n.to(".cyan-display-main",1,{opacity:1});n.staggerFrom(".cyan-display-main .time span",.3,{scale:.5,opacity:0,delay:.1,ease:Elastic.easeOut,force3D:!0},.1).to("#cyan-info",.2,{autoAlpha:1})}var loadedImages=0;const dateMask="DD.MM.YYYY HH:mm";$(function(){$(".cyan-display-main").css("visibility","hidden");$(".debug.meta li").css("visibility","hidden");$("#menu").css("visibility","hidden");showLoadingGif();$.ajax({url:"/api/landing/",dataType:"json",success:n=>{console.log("data",n),preloadAllImages(n)},error:(n,t,i)=>{console.error(self.props.source,t,i.toString())}})});